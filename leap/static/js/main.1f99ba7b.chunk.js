(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){},21:function(e,t,n){e.exports=n.p+"static/media/bgm.86ad9688.wav"},22:function(e,t,n){e.exports=n.p+"static/media/jump.329a069b.wav"},23:function(e,t,n){e.exports=n.p+"static/media/fail.d01430df.wav"},25:function(e,t,n){e.exports=n(37)},30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),c=(n(30),n(2)),s=n(3),u=n(6),l=n(4),f=n(5),p=n(1),d=n(8),h=(n(11),n(12),a.Component,function(e){return{type:"init_random",payload:e}}),m=function(e){return{type:"going_jump",payload:e}},v=function(e){return{type:"sending_success",payload:e}},g=function(){var e=null,t=function(e,t){return t.fromPos-e.fromPos};function n(){return this instanceof n?(null==e&&(e=this),this.detectLength=200,this.detectAreaOffset={left:"70px",top:"50px"},this.stageBoundery=[],e):null}return n.prototype.randomByRange=function(e,t){return Math.floor(Math.random()*(t-e)+e)},n.prototype.putInStageBoundary=function(e){e.hasOwnProperty("stage")||e.hasOwnProperty("fromPos")?(this.stageBoundery.push(e),this.stageBoundery.sort(t)):console.log("incorrect properties")},n}(),y=(new g,function(e){function t(e,n){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e,n))).whichFloor=-1,a.speed=-1,a._currentLeft=-1,a.isJumping=!1,a.aniCallfunction=function(){a.isJumping=!1,a.turtleRef.current.removeEventListener("webkitAnimationEnd",a.aniCallfunction,!1),a.turtleRef.current.removeEventListener("animationend",a.aniCallfunction,!1),a.turtleRef.current.removeEventListener("oanimationend",a.aniCallfunction,!1),a.props.onFinishJump(a.props.idx)},a.onShapeClick=a.onShapeClick.bind(Object(p.a)(Object(p.a)(a))),a.aniCallfunction=a.aniCallfunction.bind(Object(p.a)(Object(p.a)(a))),a.readyToMove=a.readyToMove.bind(Object(p.a)(Object(p.a)(a))),a.currentLeft=a.currentLeft.bind(Object(p.a)(Object(p.a)(a))),a.flowRef=r.a.createRef(),a.turtleRef=r.a.createRef(),a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.flowStaffName;this.readyToMove(),this.whichFloor=e.substr(6,1),this.speed=2e3/(20-2*(this.whichFloor-1))}},{key:"readyToMove",value:function(){var e=this.props,t=e.onGoingMove,n=e.idx,a=e.startMoveDelay;e.flowStaffName;setTimeout(function(){t(n)},1e3*a)}},{key:"currentLeft",value:function(){var e=this.turtleRef.current.getBoundingClientRect(),t=this.props,n=(t.state,t.stage,t.currentLeft);return n<0&&this.props.onSendingSuccess(this.props.idx),e.left}},{key:"setStyle",value:function(){return{zIndex:this.props.zIndex}}},{key:"onShapeClick",value:function(e){if("fail"!==this.props.state){var t=this.turtleRef.current.getBoundingClientRect();this.props.onGoingJump({id:this.props.idx,leftPos:t.left}),this.props.playJump(),this.isJumping=!0,this.turtleRef.current.addEventListener("webkitAnimationEnd",this.aniCallfunction,!1),this.turtleRef.current.addEventListener("animationend",this.aniCallfunction,!1),this.turtleRef.current.addEventListener("oanimationend",this.aniCallfunction,!1)}}},{key:"render",value:function(){var e=this.props,t=(e.onTriClick,e.shapeName),n=(e.showNotice,e.jumpClass),o=e.flowStaffName,i=e.moveClass,c=this.setStyle(),s=t+" "+n;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{class:o,ref:this.flowRef}),r.a.createElement("span",{class:i,style:c},r.a.createElement("li",{className:s,onClick:this.onShapeClick,ref:this.turtleRef},this.props.children)))}}]),t}(a.Component)),b=Object(d.b)(function(e,t){var n=e.events.group,a=null;return n.every(function(e,n,r){return e.idx!==t.idx||(a=e,!1)}),{idx:a.idx,stage:a.stage,shapeName:a.shapeName,flowStaffName:a.flowStaffName,jumpClass:a.jumpClass,startMoveDelay:a.startMoveDelay,zIndex:a.zIndex,moveClass:a.moveClass,state:a.state,currentLeft:a.currentLeft}},function(e){return{onTriClick:function(){var t;e({type:"trigger_click",payload:t})},onGoingJump:function(t){var n;e((n=t,function(e){e(m(n))}))},onGoingMove:function(t){e({type:"going_move",payload:t})},onFinishJump:function(t){e({type:"going_jump_done",payload:t})},onGoingStart:function(t){e(function e(t){return{type:e,payload:t}}(t))},onSendingSuccess:function(t){e(v(t))},onChangeStage:function(t){e(function(e){return{type:"change_stage",payload:e}}(t))}}},null,{withRef:!0})(y);j=b,function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(j,this.props,r.a.createElement("span",{className:"arrowNoticebody"},r.a.createElement("span",{className:"arrowNoticearrowOuter"}),r.a.createElement("span",{className:"arrowText"},"try and click me!")))}}])}(a.Component);var j,C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={TestReactCh1:1},n.textClick=n.textClick.bind(Object(p.a)(Object(p.a)(n))),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"textClick",value:function(){this.setState({TestReactCh1:11})}},{key:"render",value:function(){return console.log("TestReactCh1"),r.a.createElement("div",null,r.a.createElement("span",{onClick:this.textClick},"TestReactCh1,",this.state.TestReactCh1))}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={TestReactCh2:2},n.textClick=n.textClick.bind(Object(p.a)(Object(p.a)(n))),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"textClick",value:function(){this.setState({TestReactCh2:2})}},{key:"render",value:function(){return console.log("TestReactCh2"),r.a.createElement("div",null,r.a.createElement("span",{onClick:this.textClick},"TestReactCh2,",this.state.TestReactCh2))}}]),t}(a.Component),k=(a.Component,new g),w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).fromPos=0,n.toPos=0,n.detectBoundary=0,n.stageIdx=0,n.isStarted=!1,n.whichStyle="",n.getStyle=function(){var e=n.props.detectType;switch(n.stageIdx=e,e){case 1:n.whichStyle="10%";break;case 2:n.whichStyle="40%";break;case 3:n.whichStyle="70%"}return{left:n.whichStyle}},n.checkDetect=n.checkDetect.bind(Object(p.a)(Object(p.a)(n))),n.detectAreaRef=r.a.createRef(),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.detectAreaRef.current.getBoundingClientRect();this.fromPos=e.left,this.detectBoundary=this.fromPos-450,this.toPos=this.fromPos+k.detectLength,k.putInStageBoundary({stage:this.stageIdx,fromPos:this.fromPos})}},{key:"checkDetect",value:function(){var e=this;this.props.groupPos.forEach(function(t){"jumping"!==t.state?t.currentLeft<=e.fromPos&&(t.lastPos<=e.toPos&&t.lastPos>=e.fromPos?e.props.dispatch(v(t.idx)):(e.props.playFail(),e.props.dispatch({type:"sending_failure",payload:t.idx}))):t.state})}},{key:"render",value:function(){this.props.detectType;return r.a.createElement("div",{class:"bridge",style:this.getStyle()},r.a.createElement("div",{class:"detectArea",style:{left:k.detectAreaOffset.left,top:k.detectAreaOffset.top},ref:this.detectAreaRef}))}}]),t}(a.Component),R=Object(d.b)(function(e,t){var n=e.events.group,a=[];return n.forEach(function(e){a.push({idx:e.idx,lastPos:e.lastJumpLeft,stage:e.stage,currentLeft:e.currentLeft,state:e.state})}),{groupPos:a}},null,null,{withRef:!0})(w),x=n(21),E=n.n(x),S=n(22),T=n.n(S),P=n(23),_=n.n(P),L=(new g,function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.score;return r.a.createElement("div",{class:"board"},r.a.createElement("span",{class:"boardText"},"Score:",e))}}]),t}(a.Component)),N=(Object(d.b)(function(e,t){return{score:e.events.score}},null,null,{withRef:!0})(L),function(e){function t(e,n){var a;Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e,n))).totalTime=0,a.playJumpSound=function(){a.jumpSdRef.current.play()},a.playFailSound=function(){a.failSdRef.current.play()},a.resetClick=a.resetClick.bind(Object(p.a)(Object(p.a)(a))),a.happyClick=a.happyClick.bind(Object(p.a)(Object(p.a)(a))),a.childrenRefs=[];for(var o=0;o<15;o++)a.childrenRefs.push(r.a.createRef());a.detectRefs=[];for(var i=0;i<3;i++)a.detectRefs.push(r.a.createRef());return a.jumpSdRef=r.a.createRef(),a.failSdRef=r.a.createRef(),a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.initCount;this.props.dispatch(h(this.refs.canvasRef));var n=[];setInterval(function(){e.totalTime+=.3;var a=0;n.length=0;for(var r=0;r<t;r++)a=e.childrenRefs[r].current.getWrappedInstance().currentLeft(),n.push(a);e.props.dispatch({type:"notify_left_pos",payload:n});for(var o=0;o<3;o++)e.detectRefs[o].current.getWrappedInstance().checkDetect()},300)}},{key:"detectCheckTik",value:function(){}},{key:"resetClick",value:function(e){this.props.dispatch(h(this.refs.canvasRef))}},{key:"happyClick",value:function(e){var t=this,n=this.props.group,a=Promise.resolve(),r=!0,o=!1,i=void 0;try{for(var c,s=function(){var e=c.value;a=a.then(function(n){return new Promise(function(t,n){setTimeout(function(){t(e.idx)},1e3)}).then(function(e){return t.props.dispatch(m(e))})})},u=n[Symbol.iterator]();!(r=(c=u.next()).done);r=!0)s()}catch(l){o=!0,i=l}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}}},{key:"render",value:function(){var e=this,t=this.props.group;return r.a.createElement("div",null,r.a.createElement("audio",{autoplay:"autoplay",controls:"controls",style:{visibility:"hidden"}},r.a.createElement("source",{src:E.a})),r.a.createElement("audio",{src:T.a,controls:!0,ref:this.jumpSdRef,style:{visibility:"hidden"}}),r.a.createElement("audio",{src:_.a,controls:!0,ref:this.failSdRef,style:{visibility:"hidden"}}),r.a.createElement("div",{class:"river"},r.a.createElement("div",{class:"wave"}),r.a.createElement("div",{class:"wave"}),r.a.createElement("div",{class:"wave"}),r.a.createElement("div",{class:"wave"}),r.a.createElement("div",{class:"wave"}),r.a.createElement("div",{class:"wave"}),t.map(function(t,n,a){return r.a.createElement(b,{shapeName:t.shapeName,idx:t.idx,ref:e.childrenRefs[n],playJump:function(){return e.playJumpSound()}})}),r.a.createElement(R,{detectType:1,ref:this.detectRefs[0],playFail:function(){return e.playFailSound()}}),r.a.createElement(R,{detectType:2,ref:this.detectRefs[1],playFail:function(){return e.playFailSound()}}),r.a.createElement(R,{detectType:3,ref:this.detectRefs[2],playFail:function(){return e.playFailSound()}})),r.a.createElement("div",{class:"decoration-1"}),r.a.createElement("div",{class:"decoration-3"}),r.a.createElement("button",{className:"resetButton",onClick:this.resetClick},"Reset"),r.a.createElement("button",{className:"resetButton",onClick:this.happyClick},"Happy Together"))}}]),t}(a.Component)),B=Object(d.b)(function(e){return{initCount:e.events.initCount,init:e.events.init,group:e.events.group}},null)(N);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=n(10),J=n(9),M=["frogA","frogB","frogC","frogA","frogB","frogC","frogA","frogB","frogC"],F=["branch1-1","branch1-2","branch1-3","branch2-1","branch2-2","branch2-3","branch3-1","branch3-2","branch3-3","branch4-1","branch4-2","branch4-3","branch5-1","branch5-2","branch5-3"],A=new g,D=n(24),z=(window,Object(I.c)({events:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{init:!1,score:0,initCount:15,group:[]},n=arguments.length>1?arguments[1]:void 0,a=null,r={},o=0;switch(n.type){case"trigger_click":return Object(J.a)({},t);case"init_random":for(var i=[],c=0;c<t.initCount;c++){var s={idx:c,flowStaffName:F[A.randomByRange(0,F.length)],shapeName:M[A.randomByRange(0,M.length)],state:"stand",startMoveDelay:A.randomByRange(2,15),jumpClass:"",zIndex:1,moveClass:"moveStartInit",lastJumpLeft:3e3,success:"success",stage:1,currentLeft:1600};i.push(s)}return console.log("random"),Object(J.a)({},t,{init:!0,group:i});case"notify_left_pos":var u=n.payload;return t.group.forEach(function(e,t,n){e.currentLeft=u[t]}),Object.assign(r,t),r;case"going_start":return e=n.payload,t.group.some(function(t){return t.idx===e&&((a=t).jumpClass="",a.zIndex=1,a.moveClass="moveStartInit",!0)}),Object.assign(r,t),r;case"going_jump":return e=n.payload.id,o=n.payload.leftPos,t.group.some(function(t){return t.idx===e&&((a=t).jumpClass="running",a.state="jumping",a.zIndex=10,a.lastJumpLeft=o,!0)}),Object.assign(r,t),r;case"sending_failure":return e=n.payload,t.group.some(function(t){return t.idx===e&&((a=t).jumpClass="fail",a.state="fail",!0)}),Object.assign(r,t),Object(J.a)({},r,{score:t.score});case"change_stage":e=n.payload.id;var l=n.payload.sg;return t.group.some(function(t){return t.idx===e&&((a=t).stage=l,!0)}),Object.assign(r,t),r;case"sending_success":return e=n.payload,t.group.some(function(t){return t.idx===e&&((a=t).jumpClass="recover",a.state="success",!0)}),Object.assign(r,t),Object(J.a)({},r,{score:t.score+1});case"going_jump_done":return e=n.payload,t.group.some(function(t){return t.idx===e&&((a=t).jumpClass="",a.zIndex=1,a.state="stand",!0)}),Object.assign(r,t),r;case"going_move":return e=n.payload,t.group.some(function(t){if(t.idx===e){var n=(a=t).flowStaffName.substr(6,1);return a.moveClass="moveStartPoint-"+n+" branch-transform-"+n,a.flowStaffName+=" branch-transform-"+n,!0}return!1}),Object.assign(r,t),r;case"happy_together":t.group.map(function(e,t,n){e.jumpClass="running"});var f={};return Object.assign(f,t),f;default:return Object(J.a)({},t)}},ani:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"going_jump":default:return Object(J.a)({},e)}}})),G=Object(I.d)(z,Object(I.a)(D.a));i.a.render(r.a.createElement(d.a,{store:G},r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.1f99ba7b.chunk.js.map