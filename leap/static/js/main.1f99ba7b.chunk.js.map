{"version":3,"sources":["assets/bgm.wav","assets/jump.wav","assets/fail.wav","reducers/actions.js","views/TestPureCmp.js","reducers/actionTypes.js","utils/util.js","views/ShapeCmp.js","views/VariationShapeCmp.js","views/TestReactCh1.js","views/TestReactCh2.js","views/DetectArea.js","views/TestReactParent.js","views/Board.js","views/App.js","serviceWorker.js","reducers/reducer.js","Store.js","reducers/aniReducer.js","index.js"],"names":["module","exports","__webpack_require__","p","init_random_action","Component","data","type","payload","going_jump_action","sending_success_action","utilTool","_singleIns","_sortFun","a","b","fromPos","utilSingleton","this","detectLength","detectAreaOffset","left","top","stageBoundery","prototype","randomByRange","min","max","Math","floor","random","putInStageBoundary","el","hasOwnProperty","push","sort","console","log","ShapeCmp","props","context","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","whichFloor","speed","_currentLeft","isJumping","aniCallfunction","turtleRef","current","removeEventListener","onFinishJump","idx","onShapeClick","bind","assertThisInitialized","readyToMove","currentLeft","flowRef","React","createRef","flowStaffName","substr","_this$props","onGoingMove","startMoveDelay","setTimeout","rect","getBoundingClientRect","_this$props2","state","stage","onSendingSuccess","zIndex","event","onGoingJump","id","leftPos","playJump","addEventListener","_this$props3","shapeName","onTriClick","jumpClass","showNotice","moveClass","styleObj","setStyle","finalClass","react_default","createElement","react","class","ref","style","className","onClick","children","connect","ownprops","nodes","events","group","node","every","element","arr","dispatch","onGoingStart","going_start","onChangeStage","change_stage_action","withRef","WrappedComponent","_Component","HOC","apply","arguments","inherits","createClass","key","value","VariationShapeCmp","TestReactCh1","textClick","setState","TestReactCh2","DetectArea","toPos","detectBoundary","stageIdx","isStarted","whichStyle","getStyle","detectType","checkDetect","detectAreaRef","_this2","groupPos","forEach","lastPos","playFail","ownProps","lastJumpLeft","Board","score","App","totalTime","playJumpSound","jumpSdRef","play","playFailSound","failSdRef","resetClick","happyClick","childrenRefs","i","detectRefs","initCount","refs","canvasRef","lefts","setInterval","templeft","length","getWrappedInstance","e","_this3","Promise","resolve","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_loop","item","then","res","resolver","reject","_iterator","Symbol","iterator","next","done","err","return","_this4","autoplay","controls","visibility","src","bgm","jumpSd","failSd","map","views_ShapeCmp","views_DetectArea","init","Boolean","window","location","hostname","match","ShapesNameOption","FlowStaffNameOption","util","reducer_combine","combineReducers","action","newstate","objectSpread","index","success","leftpos","assign","some","sg","bidx","st","ani","createStore","applyMiddleware","thunk","ReactDOM","render","es","store","views_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1f99ba7b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bgm.86ad9688.wav\";","module.exports = __webpack_public_path__ + \"static/media/jump.329a069b.wav\";","module.exports = __webpack_public_path__ + \"static/media/fail.d01430df.wav\";","import {TRIGGER_CLICK,EMIT_ROTATE,INIT_RANDOM,GOING_JUMP, HAPPY_TOGETHER, GOING_MOVE, GOING_JUMP_DONE, SENDING_FAILURE, SENDING_SUCCESS, NOTIFY_LEFT_POS, CHANGE_STAGE} from './actionTypes';\r\n\r\nexport const triangle_trigger_click_action=(data)=>{\r\n    return {\r\n        type:TRIGGER_CLICK,\r\n        payload:data\r\n    }\r\n}\r\nexport const emit_rotate_action=(data)=>{\r\n    return {\r\n        type:EMIT_ROTATE,\r\n        payload:data\r\n    }\r\n}\r\nexport const init_random_action=(data)=>{\r\n    return {\r\n        type:INIT_RANDOM,\r\n        payload:data\r\n    }\r\n}\r\nexport const going_jump_action=(data)=>{\r\n    return{\r\n        type:GOING_JUMP,\r\n        payload:data\r\n    }\r\n}\r\nexport const going_jump_ani=(data)=>{\r\n    return (dispatch)=>{\r\n        dispatch(going_jump_action(data));\r\n        \r\n    }\r\n}\r\nexport const going_start=(data)=>{\r\n    return{\r\n        type:going_start,\r\n        payload:data\r\n    }\r\n}\r\nexport const finish_jump_action=(data)=>{\r\n    return{\r\n        type:GOING_JUMP_DONE,\r\n        payload:data\r\n    }\r\n}\r\nexport const going_move_action=(data)=>{\r\n    return{\r\n        type:GOING_MOVE,\r\n        payload:data\r\n    }\r\n}\r\nexport const happy_together_action=()=>{\r\n    return {\r\n        type:HAPPY_TOGETHER,\r\n    }\r\n}\r\nexport const notify_left_pos_action=(data)=>{\r\n    return{\r\n        type:NOTIFY_LEFT_POS,\r\n        payload:data\r\n    }\r\n}\r\nexport const sending_failure_action=(data)=>{\r\n    return{\r\n        type:SENDING_FAILURE,\r\n        payload:data\r\n    }\r\n}\r\nexport const sending_success_action=(data)=>{\r\n    return{\r\n        type:SENDING_SUCCESS,\r\n        payload:data\r\n    }\r\n}\r\nexport const change_stage_action=(data)=>{\r\n    return{\r\n        type:CHANGE_STAGE,\r\n        payload:data\r\n    }\r\n}","import React,{ Component,PropTypes} from 'react';\r\n\r\nexport default class TestPureCmp extends Component{\r\n\r\n    render(){\r\n        const {item}=this.props;\r\n        return(\r\n            <div>\r\n            <span>{item.name}</span>\r\n            <span>{item.age}</span>\r\n            </div>\r\n        )\r\n    }\r\n}","export const TRIGGER_CLICK=\"trigger_click\";\r\nexport const EMIT_ROTATE=\"emit_rotate\";\r\nexport const INIT_RANDOM=\"init_random\";\r\nexport const GOING_START=\"going_start\";\r\nexport const GOING_JUMP=\"going_jump\";\r\nexport const GOING_MOVE=\"going_move\";\r\nexport const HAPPY_TOGETHER=\"happy_together\";\r\nexport const GOING_JUMP_DONE=\"going_jump_done\";\r\nexport const SENDING_FAILURE=\"sending_failure\";\r\nexport const SENDING_SUCCESS=\"sending_success\";\r\nexport const NOTIFY_LEFT_POS=\"notify_left_pos\";\r\nexport const CHANGE_STAGE=\"change_stage\";","//singleton\r\nexport var utilTool=(\r\nfunction(){\r\n    var _singleIns=null;\r\n    var _sortFun=(a,b)=>{\r\n        return b.fromPos - a.fromPos;\r\n    };\r\n    function utilSingleton(){\r\n        if(!(this instanceof utilSingleton))\r\n        return null;\r\n        if(_singleIns == null)\r\n            _singleIns = this;\r\n\r\n        //define some const variables here\r\n        this.detectLength=200;\r\n        this.detectAreaOffset={left:'70px',top:'50px'};\r\n        this.stageBoundery=[];\r\n        return _singleIns;\r\n    }\r\n    utilSingleton.prototype.randomByRange=function(min,max){\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n    utilSingleton.prototype.putInStageBoundary=function(el){\r\n        if(!el.hasOwnProperty(\"stage\") && !el.hasOwnProperty(\"fromPos\"))\r\n        {\r\n            console.log(\"incorrect properties\");\r\n            return;\r\n        }\r\n        this.stageBoundery.push(el);\r\n        this.stageBoundery.sort(_sortFun);\r\n\r\n    }\r\n    return utilSingleton;\r\n}\r\n)();\r\n","import React, { Component, PropTypes, PureComponent,Fragment } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./material.scss\";\r\nimport \"./river.scss\";\r\nimport TestPureCmp from \"./TestPureCmp.js\";\r\nimport {\r\n  triangle_trigger_click_action,\r\n  going_jump_action,\r\n  going_move_action,\r\n  going_jump_ani,\r\n  finish_jump_action,\r\n  going_start,\r\n  notify_left_pos_action,\r\n  sending_success_action,\r\n  change_stage_action\r\n} from \"../reducers/actions\";\r\nimport { utilTool } from \"../utils/util.js\";\r\nvar util = new utilTool();\r\nclass ShapeCmp extends Component {\r\n  //itemV={name:'yu',age:35};\r\n  whichFloor=-1;\r\n  speed=-1;\r\n  _currentLeft=-1;\r\n  isJumping=false;\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.onShapeClick = this.onShapeClick.bind(this);\r\n    this.aniCallfunction = this.aniCallfunction.bind(this);\r\n    this.readyToMove = this.readyToMove.bind(this);\r\n    this.currentLeft = this.currentLeft.bind(this);\r\n    this.flowRef = React.createRef();\r\n    this.turtleRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    const { flowStaffName } = this.props;\r\n    this.readyToMove();\r\n    this.whichFloor=flowStaffName.substr(6,1);\r\n    this.speed=2000/(20-2*(this.whichFloor - 1));\r\n  }\r\n\r\n  readyToMove(){\r\n    const { onGoingMove, idx, startMoveDelay, flowStaffName } = this.props;\r\n    setTimeout(() => {\r\n      onGoingMove(idx);\r\n    }, startMoveDelay * 1000);\r\n  }\r\n  currentLeft(){\r\n    let rect = this.turtleRef.current.getBoundingClientRect();\r\n     //return (1600 - this.speed * totalTime) ;\r\n     const{state,stage,currentLeft}=this.props;\r\n    //  let sg=1;\r\n    //  util.stageBoundery.some((el)=>{\r\n    //     if(rect.left > el.fromPos)\r\n    //     {\r\n    //       sg=el.stage;\r\n    //       return true;\r\n    //     }\r\n    //  });\r\n    //  if(stage !== sg)\r\n    //  {\r\n    //    this.props.onChangeStage({id:this.props.idx,sg:sg});\r\n    //  }\r\n    if(currentLeft < 0)\r\n    this.props.onSendingSuccess(this.props.idx);\r\n     return rect.left;\r\n  }\r\n\r\n  setStyle() {\r\n    const { zIndex } = this.props;\r\n    return {\r\n     // left: util.randomByRange(1500, 1800),\r\n      zIndex: zIndex\r\n    };\r\n  }\r\n  // shouldComponentUpdate(nextprops,nextstate){\r\n  //     if(nextprops.jumpClass !== this.props.jumpClass ||\r\n  //         (this.props.left !== nextprops.left && this.props.top != nextprops.top) )\r\n  //     return true;\r\n  //     else\r\n  //     return false;\r\n  // }\r\n\r\n  onShapeClick(event) {\r\n    if(this.props.state === 'fail')return;\r\n    let rect = this.turtleRef.current.getBoundingClientRect();\r\n    this.props.onGoingJump({id:this.props.idx,leftPos:rect.left});\r\n    this.props.playJump();\r\n    this.isJumping=true;\r\n//console.log(\"jump left:\",rect.left);\r\n    this.turtleRef.current.addEventListener(\"webkitAnimationEnd\", this.aniCallfunction,false);\r\n    this.turtleRef.current.addEventListener(\"animationend\", this.aniCallfunction,false);\r\n    this.turtleRef.current.addEventListener(\"oanimationend\", this.aniCallfunction,false);\r\n  }\r\n  aniCallfunction=()=>{\r\n   this.isJumping=false;\r\n    this.turtleRef.current.removeEventListener(\"webkitAnimationEnd\", this.aniCallfunction,false);\r\n    this.turtleRef.current.removeEventListener(\"animationend\", this.aniCallfunction,false);\r\n    this.turtleRef.current.removeEventListener(\"oanimationend\", this.aniCallfunction,false);\r\n    this.props.onFinishJump(this.props.idx);\r\n};\r\n  render() {\r\n    const {\r\n      onTriClick,\r\n      shapeName,\r\n      showNotice,\r\n      jumpClass,\r\n      flowStaffName,\r\n      moveClass\r\n    } = this.props;\r\n    let styleObj = this.setStyle();\r\n    let finalClass = shapeName + \" \" + jumpClass;\r\n   \r\n    return (\r\n      <Fragment>\r\n        <div class={flowStaffName} ref={this.flowRef}>\r\n         \r\n        </div>\r\n        <span class={moveClass}  style={styleObj}>\r\n        <li\r\n            className={finalClass}\r\n            onClick={this.onShapeClick}\r\n            ref={this.turtleRef}\r\n           \r\n          >\r\n            {this.props.children}\r\n          </li>\r\n          </span>\r\n        {/* <TestPureCmp item={this.state.item}/> */}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownprops) => {\r\n  let nodes = state.events.group;\r\n  let node = null;\r\n  let resultProps = null;\r\n  nodes.every((element, idx, arr) => {\r\n    if (element.idx === ownprops.idx) {\r\n      node = element;\r\n      return false;\r\n    } else return true;\r\n  });\r\n  return {\r\n    idx:node.idx,\r\n    stage:node.stage,\r\n    shapeName: node.shapeName,\r\n    flowStaffName: node.flowStaffName,\r\n    jumpClass: node.jumpClass,\r\n    startMoveDelay: node.startMoveDelay,\r\n    zIndex:node.zIndex,\r\n    moveClass:node.moveClass,\r\n    state:node.state,\r\n    currentLeft:node.currentLeft\r\n  };\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onTriClick: () => {\r\n      dispatch(triangle_trigger_click_action());\r\n    },\r\n    onGoingJump: (id) => {\r\n      dispatch(going_jump_ani(id));\r\n    },\r\n    onGoingMove: id => {\r\n      dispatch(going_move_action(id));\r\n    },\r\n    onFinishJump: id=>{\r\n        dispatch(finish_jump_action(id));\r\n    },\r\n    onGoingStart: id=>{\r\n      dispatch(going_start(id));\r\n    },\r\n    onSendingSuccess:id=>{\r\n      dispatch(sending_success_action(id));\r\n    },\r\n    onChangeStage:data=>{\r\n      dispatch(change_stage_action(data));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,null, { withRef: true }\r\n)(ShapeCmp);\r\n","import React,{ Component,PropTypes,PureComponent} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ShapeCmp from './ShapeCmp.js';\r\nimport './material.scss';\r\nfunction VariationShapeCmp(WrappedComponent){\r\n    class HOC extends Component{\r\n        render(){\r\n            return(\r\n                <WrappedComponent {...this.props}>\r\n                 <span className=\"arrowNoticebody\">\r\n                <span className=\"arrowNoticearrowOuter\"></span>\r\n                <span className=\"arrowText\">try and click me!</span>\r\n                </span>\r\n                </WrappedComponent>\r\n            )\r\n        }\r\n    }\r\n    return HOC;\r\n}\r\nexport default VariationShapeCmp(ShapeCmp);","import React,{ Component,PropTypes} from 'react';\r\n\r\nexport default class TestReactCh1 extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            TestReactCh1:1,\r\n        };\r\n        this.textClick=this.textClick.bind(this);\r\n    }\r\n    textClick(){\r\n        this.setState({\r\n            TestReactCh1:11\r\n        });\r\n    }\r\n    render(){\r\n        console.log(\"TestReactCh1\");\r\n        return(\r\n            <div>\r\n                <span onClick={this.textClick}>TestReactCh1,{this.state.TestReactCh1}</span>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","import React,{ Component,PropTypes} from 'react';\r\n\r\nexport default class TestReactCh2 extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            TestReactCh2:2,\r\n        }\r\n        this.textClick=this.textClick.bind(this);\r\n    }\r\n    textClick(){\r\n        this.setState({\r\n            TestReactCh2:2\r\n        });\r\n    }\r\n\r\n    render(){\r\n        console.log(\"TestReactCh2\");\r\n        return(\r\n            <div>\r\n               <span onClick={this.textClick}>TestReactCh2,{this.state.TestReactCh2}</span>\r\n            </div>\r\n        )\r\n    }\r\n}","import React,{ Component,PropTypes} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './material.scss';\r\nimport './river.scss';\r\nimport { sending_success_action, sending_failure_action } from '../reducers/actions';\r\nimport {utilTool} from '../utils/util.js';\r\nvar utilSingleton=new utilTool();\r\nclass DetectArea extends Component{\r\n    fromPos=0;\r\n    toPos=0;\r\n    detectBoundary=0;\r\n    stageIdx=0;\r\n    isStarted=false;\r\n    whichStyle='';\r\n    constructor(props){\r\n        super(props);\r\n        this.checkDetect=this.checkDetect.bind(this);\r\n        this.detectAreaRef=React.createRef();\r\n    }\r\n    componentDidMount(){\r\n        let rect = this.detectAreaRef.current.getBoundingClientRect();\r\n        this.fromPos=rect.left;\r\n        this.detectBoundary=this.fromPos-450;\r\n        this.toPos=this.fromPos+utilSingleton.detectLength;\r\n        utilSingleton.putInStageBoundary({stage:this.stageIdx, fromPos:this.fromPos});\r\n    }\r\n    getStyle=()=>{\r\n        const{detectType}=this.props;\r\n        this.stageIdx = detectType;\r\n        switch(detectType){\r\n            case 1:\r\n            this.whichStyle = \"10%\";\r\n            break;\r\n            case 2:\r\n            this.whichStyle = \"40%\";\r\n            break;\r\n            case 3:\r\n            this.whichStyle = \"70%\";\r\n            break;\r\n        }\r\n        return{\r\n            left:this.whichStyle\r\n        }\r\n    }\r\n    checkDetect(){\r\n        const{groupPos}=this.props;\r\n        groupPos.forEach((element)=>{\r\n            if( element.state !== 'jumping'){\r\n                \r\n                if(element.currentLeft <= this.fromPos){\r\n                    if(element.lastPos <= this.toPos && element.lastPos >= this.fromPos)\r\n                    {\r\n                        this.props.dispatch(sending_success_action(element.idx));\r\n                    }\r\n                    else\r\n                    {\r\n                        this.props.playFail();\r\n                        this.props.dispatch(sending_failure_action(element.idx));\r\n                    }\r\n                }\r\n            }\r\n            else if( element.state === 'stand')\r\n            {\r\n                \r\n            }\r\n        });\r\n    }\r\n    render(){\r\n        const{detectType}=this.props;\r\n        return(\r\n            <div class=\"bridge\" style={this.getStyle()}>\r\n            <div class=\"detectArea\" style={(()=>{return {left:utilSingleton.detectAreaOffset.left, top:utilSingleton.detectAreaOffset.top}})()} ref={this.detectAreaRef}></div>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\nvar mapStatesToProps=function(state,ownProps){\r\n    let nodes = state.events.group;\r\n    let node = null;\r\n    let groupPos = [];\r\n    \r\n    nodes.forEach(element => {\r\n        groupPos.push({idx:element.idx, lastPos:element.lastJumpLeft,\r\n            stage:element.stage,currentLeft:element.currentLeft,state:element.state});\r\n    });\r\n    return {\r\n        groupPos:groupPos\r\n    }\r\n};\r\n\r\nexport default connect(\r\n    mapStatesToProps,\r\n    null,\r\n    null,\r\n    { withRef: true }\r\n  )(DetectArea);","import React,{ Component,PropTypes} from 'react';\r\nimport TestReactCh1 from './TestReactCh1.js';\r\nimport TestReactCh2 from './TestReactCh2.js';\r\n\r\nexport default class TestReactParent extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            TestReactParent:3,\r\n        };\r\n        this.textClick=this.textClick.bind(this);\r\n    }\r\n    textClick(){\r\n        this.setState({\r\n            TestReactParent:33\r\n        });\r\n    }\r\n    render(){\r\n        console.log(\"TestReactParent\");\r\n        return(\r\n            <div>\r\n             \r\n                <span onClick={this.textClick}>TestReactParent,{this.state.TestReactParent}</span>\r\n                <TestReactCh1/>\r\n                <TestReactCh2/>\r\n            </div>\r\n        )\r\n    }\r\n}","import React,{ Component,PropTypes} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './material.scss';\r\nimport './river.scss';\r\nimport { sending_success_action, sending_failure_action } from '../reducers/actions';\r\nimport {utilTool} from '../utils/util.js';\r\nvar utilSingleton=new utilTool();\r\nclass Board extends Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n      \r\n    }\r\n    componentDidMount(){\r\n       \r\n    }\r\n\r\n    \r\n    render(){\r\n        const{score}=this.props;\r\n        return(\r\n            <div class=\"board\">\r\n            <span class=\"boardText\">Score:{score}</span>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\nvar mapStatesToProps=function(state,ownProps){\r\n    return {\r\n        score:state.events.score\r\n    }\r\n};\r\n\r\nexport default connect(\r\n    mapStatesToProps,\r\n    null,\r\n    null,\r\n    { withRef: true }\r\n  )(Board);","import React, { Component } from 'react';\nimport {connect} from 'react-redux';\nimport './material.scss';\nimport './river.scss';\nimport ShapeCmp from './ShapeCmp.js';\nimport HOC from \"./VariationShapeCmp.js\";\nimport {init_random_action,happy_together_action,going_jump_action,notify_left_pos_action} from '../reducers/actions';\nimport TestReactParent from './TestReactParent.js';\nimport DetectArea from './DetectArea.js';\nimport bgm from '../assets/bgm.wav';\nimport jumpSd from '../assets/jump.wav';\nimport failSd from \"../assets/fail.wav\";\nimport Board from \"./Board.js\";\nclass App extends Component {\n  totalTime=0;\n  constructor(props,context){\n    super(props,context);\n    this.resetClick=this.resetClick .bind(this);\n    this.happyClick=this.happyClick .bind(this);\n    this.childrenRefs=[];\n    for(let i=0;i<15;i++){\n      this.childrenRefs.push(React.createRef());\n    }\n    this.detectRefs=[];\n    for(let i=0;i<3;i++){\n      this.detectRefs.push(React.createRef());\n    }\n    this.jumpSdRef=React.createRef();\n    this.failSdRef=React.createRef();\n  }\n  componentDidMount(){\n  \n\n    const{initCount}=this.props;\n    this.props.dispatch(init_random_action(this.refs.canvasRef));\n\n    let lefts=[];\n    \n    setInterval(()=>{\n      this.totalTime+=0.3;\n      let templeft=0;\n      lefts.length=0;\n      for(let i=0;i<initCount;i++){\n        templeft=this.childrenRefs[i].current.getWrappedInstance().currentLeft();\n        lefts.push(templeft);\n      }\n      this.props.dispatch(notify_left_pos_action(lefts));\n      for(let i=0;i<3;i++){\n        this.detectRefs[i].current.getWrappedInstance().checkDetect();\n      }\n    },300);\n  }\n  detectCheckTik(){\n    \n  }\n  resetClick(e){\n    this.props.dispatch(init_random_action(this.refs.canvasRef));\n  }\n  happyClick(e){\n    const {group}=this.props;\n    let p=Promise.resolve();\n    for (const item of group) {\n      p=p.then(\n        (res)=>{\n          return new Promise(function(resolver,reject){\n            setTimeout(() => {\n              resolver(item.idx);\n            }, 1000);\n          }).then(\n            res=> this.props.dispatch(going_jump_action(res))\n          )\n        }\n      );\n    }\n   // this.props.dispatch(happy_together_action());\n  }\n  playJumpSound=()=>{\n    this.jumpSdRef.current.play();\n  }\n  playFailSound=()=>{\n    this.failSdRef.current.play();\n  }\n  render() {\n    const {group}=this.props;\n   \n    return (\n      <div>\n \n        <audio autoplay=\"autoplay\" controls=\"controls\" style={{visibility:'hidden'}}>    \n         <source src={bgm}/>    \n           </audio> \n        <audio src={jumpSd} controls ref={this.jumpSdRef} style={{visibility:'hidden'}}/>\n        <audio src={failSd} controls ref={this.failSdRef} style={{visibility:'hidden'}}/>\n        {/* <Board/> */}\n        <div class=\"river\">\n          <div class=\"wave\"></div>\n          <div class=\"wave\"></div>\n          <div class=\"wave\"></div>\n          <div class=\"wave\"></div>\n          <div class=\"wave\"></div>\n          <div class=\"wave\"></div>\n       \n       {\n         \n         group.map(\n           (item,idx,arr)=>{\n             let showNotice=false;\n            \n            // if(idx===0)showNotice=true;\n            // if(showNotice === true){\n            //   return <HOC shapeName={item.shapeName} idx={item.idx} ref={this.childrenRef[idx]}\n            // />\n            // }\n            // else\n            //  return <ShapeCmp shapeName={item.shapeName} idx={item.idx} ref={this.childrenRef[idx]}\n            //  />\n            return <ShapeCmp shapeName={item.shapeName} idx={item.idx} ref={this.childrenRefs[idx]} \n            playJump={()=>this.playJumpSound()}/>\n           }\n         )\n       }\n\n       \n        <DetectArea detectType={1} ref={this.detectRefs[0]}  playFail={()=>this.playFailSound()}/>\n        <DetectArea detectType={2} ref={this.detectRefs[1]}  playFail={()=>this.playFailSound()}/>\n        <DetectArea detectType={3} ref={this.detectRefs[2]}  playFail={()=>this.playFailSound()}/>\n        </div>\n        \n        <div class=\"decoration-1\"></div>\n        <div class=\"decoration-3\"></div>\n        {/* <TestReactParent/> */}\n      <button className=\"resetButton\" onClick={this.resetClick}>Reset</button>\n      <button className=\"resetButton\" onClick={this.happyClick}>Happy Together</button>\n      \n      </div>\n    );\n  }\n}\nvar mapStateToProps=(state)=>{\n    return{\n      initCount:state.events.initCount,\n      init:state.events.init,\n      group:state.events.group,\n    }\n}\nexport default connect(mapStateToProps,null)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {TRIGGER_CLICK,INIT_RANDOM, GOING_JUMP, HAPPY_TOGETHER, GOING_MOVE, GOING_JUMP_DONE, GOING_START, SENDING_FAILURE, SENDING_SUCCESS, NOTIFY_LEFT_POS, CHANGE_STAGE} from './actionTypes.js';\r\nimport {utilTool} from '../utils/util.js';\r\nimport { going_start } from './actions.js';\r\n\r\nvar ShapesNameOption=[\"frogA\",\"frogB\",\"frogC\",\"frogA\",\"frogB\",\"frogC\",\"frogA\",\"frogB\",\"frogC\"];\r\nvar FlowStaffNameOption=[\"branch1-1\",\"branch1-2\",\"branch1-3\",\r\n\"branch2-1\",\"branch2-2\",\"branch2-3\",\r\n\"branch3-1\",\"branch3-2\",\"branch3-3\",\r\n\"branch4-1\",\"branch4-2\",\"branch4-3\",\r\n\"branch5-1\",\"branch5-2\",\"branch5-3\",];\r\nvar util=new utilTool();\r\nexport default (state={init:false,score:0,initCount:15,group:[]}, action)=>{\r\n    let node=null;\r\n    let id;\r\n    let newstate={};\r\n    let leftPos=0;\r\n    switch (action.type) {\r\n        case TRIGGER_CLICK:\r\n        return {...state};\r\n            break;\r\n        case INIT_RANDOM:\r\n        let nodes=[];\r\n        for (let index = 0; index < state.initCount; index++) {\r\n            let node={\r\n                idx:index,\r\n                flowStaffName:FlowStaffNameOption[util.randomByRange(0,FlowStaffNameOption.length)],\r\n                shapeName:ShapesNameOption[util.randomByRange(0,ShapesNameOption.length)],\r\n                state:'stand',\r\n                startMoveDelay:util.randomByRange(2,15),\r\n                jumpClass:'',\r\n                zIndex:1,\r\n                moveClass:'moveStartInit',\r\n                lastJumpLeft:3000,\r\n                success:'success',\r\n                stage:1,\r\n                currentLeft:1600,\r\n            };\r\n            nodes.push(node);\r\n        }\r\n        console.log(\"random\");\r\n        return {...state,init:true,group:nodes};\r\n            break;\r\n        case NOTIFY_LEFT_POS:\r\n     \r\n        let leftpos=action.payload;\r\n        state.group.forEach(function(item,idx,arr){\r\n            item.currentLeft=leftpos[idx];\r\n        });\r\n        Object.assign(newstate,state);\r\n        return newstate;\r\n        break;\r\n\r\n        case GOING_START:\r\n        id=action.payload;\r\n        state.group.some(function(item){\r\n            if(item.idx === id)\r\n            {\r\n                node=item;\r\n                node.jumpClass=\"\";\r\n                node.zIndex=1;\r\n                node.moveClass='moveStartInit';\r\n                return true;\r\n            }\r\n            else\r\n            return false;\r\n        });\r\n   \r\n        Object.assign(newstate,state);\r\n        return newstate;\r\n        break;\r\n\r\n        case GOING_JUMP:\r\n        id=action.payload.id;\r\n        leftPos=action.payload.leftPos;\r\n        state.group.some(function(item){\r\n            if(item.idx === id)\r\n            {\r\n                node=item;\r\n                node.jumpClass=\"running\";\r\n                node.state='jumping';\r\n                node.zIndex=10;\r\n                node.lastJumpLeft=leftPos;\r\n                return true;\r\n            }\r\n            else\r\n            return false;\r\n        });\r\n   \r\n        Object.assign(newstate,state);\r\n        return newstate;\r\n        break;\r\n\r\n        case SENDING_FAILURE:\r\n        id=action.payload;\r\n        \r\n        state.group.some(function(item){\r\n            if(item.idx === id)\r\n            {\r\n                node=item;\r\n                node.jumpClass=\"fail\";\r\n                node.state='fail';\r\n                return true;\r\n            }\r\n            else\r\n            return false;\r\n        });\r\n   \r\n        Object.assign(newstate,state);\r\n        return {...newstate,score:state.score};\r\n        break;\r\n\r\n        case CHANGE_STAGE:\r\n        id=action.payload.id;\r\n        let sg=action.payload.sg;\r\n        state.group.some(function(item){\r\n            if(item.idx === id)\r\n            {\r\n        \r\n                node=item;\r\n                node.stage=sg;\r\n                return true;\r\n            }\r\n            else\r\n            return false;\r\n        });\r\n   \r\n        Object.assign(newstate,state);\r\n        return newstate;\r\n        break;\r\n\r\n\r\n        case SENDING_SUCCESS:\r\n        id=action.payload;\r\n        \r\n        state.group.some(function(item){\r\n            if(item.idx === id)\r\n            {\r\n        \r\n                node=item;\r\n                node.jumpClass=\"recover\";\r\n                node.state='success';\r\n                //node.lastJumpLeft=0;\r\n                return true;\r\n            }\r\n            else\r\n            return false;\r\n        });\r\n   \r\n        Object.assign(newstate,state);\r\n        return {...newstate,score:state.score+1};\r\n        return newstate;\r\n        break;\r\n\r\n        case GOING_JUMP_DONE:\r\n        id=action.payload;\r\n        state.group.some(function(item){\r\n            if(item.idx === id)\r\n            {\r\n                node=item;\r\n                node.jumpClass=\"\";\r\n                node.zIndex=1;\r\n                node.state='stand';\r\n                return true;\r\n            }\r\n            else\r\n            return false;\r\n        });\r\n        Object.assign(newstate,state);\r\n        return newstate;\r\n        break;\r\n\r\n        case GOING_MOVE:\r\n        id=action.payload;\r\n        state.group.some(function(item){\r\n            if(item.idx === id)\r\n            {\r\n                node=item;\r\n                let bidx=node.flowStaffName.substr(6,1);\r\n                node.moveClass=\"moveStartPoint-\"+bidx+\" branch-transform-\"+bidx;\r\n                node.flowStaffName+=\" branch-transform-\"+bidx;\r\n               // node.shapeName+=(\"-\"+bidx);\r\n                return true;\r\n            }\r\n            else\r\n            return false;\r\n        });\r\n        Object.assign(newstate,state);\r\n        return newstate;\r\n        break;\r\n\r\n\r\n\r\n        case HAPPY_TOGETHER:\r\n        state.group.map((item,idx,arr)=>{\r\n            item.jumpClass=\"running\";\r\n        });\r\n        let st={};\r\n        Object.assign(st,state);\r\n        return st;\r\n        break;\r\n        default:\r\n        return {...state};\r\n            break;\r\n    }\r\n}","import {createStore, combineReducers, applyMiddleware } from 'redux';\nimport {reducer,aniReducer} from './reducers';\nimport thunk from 'redux-thunk';\n\n//import Perf from 'react-addons-perf';\n const win = window;\n //win.Perf = Perf\nconst reducer_combine = combineReducers({\n    events: reducer,\n    ani: aniReducer,\n});\n\n const middlewares = [];\n// if (process.env.NODE_ENV !== 'production') {\n//   middlewares.push(require('redux-immutable-state-invariant')());\n// }\n\n// const storeEnhancers = compose(\n//   applyMiddleware(...middlewares),\n//   (win && win.devToolsExtension) ? win.devToolsExtension() : (f) => f,\n// );\n\n// function* testGenerator(){\n//     yield 1;\n//     yield 2;\n//     return 3;\n//     yield 4;//\n// }\n// var pointer=testGenerator();\n// console.log(pointer.next(),pointer.next(),pointer.next(),pointer.next(),pointer.next());\n\nexport default createStore(reducer_combine,applyMiddleware(thunk));\n\n","import {EMIT_ROTATE,TRIGGER_CLICK,GOING_JUMP} from './actionTypes.js';\r\n\r\nexport default (state={}, action)=>{\r\n    switch (action.type) {\r\n        case GOING_JUMP:\r\n        //console.log(\"triangle click  ani\");\r\n        return {...state};\r\n            break;\r\n    \r\n        default:\r\n        return {...state};\r\n            break;\r\n    }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './views/App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './Store.js';\nimport {Provider} from 'react-redux';\n\nReactDOM.render( \n<Provider store={store}>\n    <App />\n  </Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}